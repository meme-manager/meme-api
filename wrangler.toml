# Cloudflare Workers 配置文件 (用于一键部署)
# 此文件会被 Cloudflare 网页版部署自动读取

name = "meme-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Workers 配置
workers_dev = true

# 环境变量
[vars]
ENVIRONMENT = "production"

# D1 数据库绑定
# 注意: database_id 留空,Cloudflare 会在部署时自动创建数据库并填充 ID
[[d1_databases]]
database_id = ""
binding = "DB"
database_name = "meme-db"
migrations_dir = "migrations"

# R2 存储绑定
[[r2_buckets]]
binding = "R2"
bucket_name = "meme-storage"

# KV 命名空间（用于限流，可选）
# 首次部署时可以不配置，后续需要时再添加
# [[kv_namespaces]]
# binding = "KV"
# id = ""  # 部署时自动创建

# 构建配置
[build]
command = "echo 'No build step needed'"
